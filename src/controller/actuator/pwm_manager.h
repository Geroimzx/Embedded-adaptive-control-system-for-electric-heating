#ifndef PWM_MANAGER_H
#define PWM_MANAGER_H

/**
 * @brief Оновлює стан реле на основі виходу ПІД-регулятора та перевірки безпеки.
 * 
 * Ця функція реалізує логіку програмного ШІМ на довгому періоді.
 * Перед увімкненням перевіряється температура радіатора: якщо вона перевищує 
 * безпечний ліміт, реле примусово вимикається (або залишається вимкненим).
 * 
 * Її потрібно викликати періодично з головного циклу керування.
 *
 * @param pid_output Вихідний сигнал ПІД-регулятора (від 0.0 до 100.0).
 * @param current_radiator_temp Поточна температура радіатора для захисту від перегріву (у градусах Цельсія).
 */
void pwm_manager_update(float pid_output, float current_radiator_temp);
/**
 * @brief Скидає стан ШІМ-менеджера та негайно вимикає реле.
 * 
 * Використовуйте цю функцію при переході в режими, де обігрів має бути
 * гарантовано вимкнений (STATE_OFF, STATE_EMERGENCY).
 */
void pwm_manager_reset(void);

#endif // PWM_MANAGER_H